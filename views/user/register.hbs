<link rel="stylesheet" href="/styles/userRegister.css">
<div id="particles-js" class="snow"></div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<main>
    <div class="left-side"></div>

    <div class="right-side">
        <form action="/user/register" method="post" onsubmit="return formValidate()" id="emailForm">
            <div class="or">REGISTER</div>

            <label for="name">Name</label>
            <input id="name" type="text" placeholder="Enter your name" name="name" value="{{enteredName}}"  />

            <label for="email">Email</label>
            <input id="email" type="email" placeholder="Enter Email" name="email" value="{{enteredEmail}}"  />

            <label for="phone">Phone Number</label>
            <input id="phone" type="tel" placeholder="Enter Phone Number" pattern="[0-9]{10}" maxlength="10" name="phone" value="{{enteredPhone}}"  />

            <label for="password">Password</label>
            <input id="password" type="password" placeholder="Enter Password" name="password" value="{{enteredPassword}}"  />

            <label for="confirmPassword">Confirm Password</label>
            <input id="confirmPassword" type="password" placeholder="Confirm entered Password" name="confirmPassword"  />

            <label for="code">Referral Code (Optional):</label>
            <input id="confirmPassword" type="string" placeholder="Enter referral code" name="code" />

            <button type="submit" class="login-btn">Sign Up</button>

            <div class="links">
                <a href="/user/login">Already have an account?</a>
            </div>

            <div class="social-login">
                <a href="/user/auth/google">
                    <button type="button" class="google-login">Login with Google</button>
                </a>
            </div>
        </form>
        <input type="hidden" value="{{message}}" id="message">
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    function formValidate() {
    const emailInput = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    const confirmPassword = document.getElementById("confirmPassword").value.trim();
    const name = document.getElementById("name").value.trim();

    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    const namePattern = /^[A-Za-z\s]+$/; // Only letters and spaces allowed

    if (!name || !emailInput || !password || !confirmPassword) {
        Swal.fire("All fields are required!");
        return false;
    }

    if (!emailPattern.test(emailInput)) {
        Swal.fire("Email must be valid!");
        return false;
    }

    if (password !== confirmPassword) {
        Swal.fire("Passwords do not match!");
        return false;
    }

    return true;
}

document.getElementById("emailForm").onsubmit = function () {
    return formValidate();
};

const message = document.getElementById('message')?.value;
if (message) {
    Swal.fire({
        icon: 'info',
        text: message
    });
}

</script>
